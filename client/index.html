<!DOCTYPE HTML>
<!--
    CruzHacks 2019
-->

<html>
<head>
  <title>ChemisTRY</title>
  <meta charset="utf-8" />

  <!--First = A-Frame. Second AR.JS Thrid = axios-->
  <script src="https://aframe.io/releases/0.6.1/aframe.min.js"></script>
  <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.5.0/aframe/build/aframe-ar.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>

<body style='margin : 0px; overflow: hidden;'>
    <a-scene embedded arjs>
        <a-marker preset="hiro" id="marker">
            <!-- Testing add this to a function later. Glucose -->
            <!-- <a-sphere color = "#CCCCCC" position = "0.0 0.0 0.0" radius = ".3"></a-sphere>
            <a-sphere color = "#CCCCCC" position = "0.6 0.0 0.0" radius = ".3"></a-sphere>
            <a-sphere color = "#CCCCCC" position = "0.0 0.0 0.6" radius = ".3"></a-sphere>
            <a-sphere color = "#CCCCCC" position = "0.6 0.0 0.6" radius = ".3"></a-sphere> -->
        </a-marker>
        <a-entity camera></a-entity>
    </a-scene>


    <script>
        //For actually building the molecule.
        var i = 0;
        var n = 4;

        /* Glucose (C6H12O6) Properties */
        var GLUCOSE_POSITIONS = [
            /* Carbons (0-5) */
            "-2.5 0 -.5",
            "-1.5 0 .5",
            "-.5 0 -.5",
            ".5 0 .5",
            "1.5 0 -.5",
            "2.5 0 .5",
            /* Oxygens (6-11) */
            "-2.5 0 -1.5",
            "-1.5 0 1.5",
            "-.5 0 -1.5",
            ".5 0 1.5",
            "1.5 0 -1.5",
            "2.5 0 1.5",
            /* Hydrogens (12-23) */
            "-2.75 0 -1.75",
            "-2.25 0 -1.75",
            "-1.75 0 1.75",
            "-1.25 0 1.75",
            "-.75 0 -1.75",
            "-.25 0 -1.75",
            ".75 0 1.75",
            ".25 0 1.75",
            "1.75 0 -1.75",
            "1.25 0 -1.75",
            "2.75 0 1.75",
            "2.25 0 1.75",
        ];
        var GLUCOSE_SCALE = 1;

        /* Oxygen (O2) Properties */
        var OXYGEN_POSITIONS = [
            /* Oxygens (0-1) */
            "-.5 0 0",
            ".5 0 0"
        ];
        var OXYGEN_SCALE = 1;

        /* Carbon Dioxide (CO2) Properties */
        var CARBON_DIOXIDE_POSITIONS = [
            /* Carbon (0) */
            "0 0 0",
            /* Oxygens (1-2) */
            "-.5 0 .5",
            ".5 0 .5",
        ]
        var CARBON_DIOXIDE_SCALE = 1;

        /* WATER (H2O) Properties */
        var WATER_POSITIONS = [
            /* Oxygen (0) */
            "0 0 0",
            /* Hydrogens (1-2) */
            "-.5 0 .5",
            ".5 0 .5",
        ]
        var WATER_SCALE = 1;


        $(function () {
            var positions = [];
            for (let i = 0; i < n; i++) {
                positions.push(i + " " + i + " " + i);
            }
            while (i < n) {
                $("#marker").append(
                    '<a-box id =\"' + id + " " + i + '\"color = "green" position = \"' + positions[i++] + '\" depth = ".5" height = ".5" width = ".5"></a-box>'
                );
            }
        });

        function isAtTarget(pos, targetPos){
            
        }

        function moveToPosition() {
            //If not at target position animate
            for (let i = 0; i < n; i++) {
                var position = (getElementById.getAttribute("id" + i)).split(" ");
                //Need to have a way to get the overallPosition for the function call.
                var targetPosition = calcTargetPosition(position);
                var posX = Integer.parseInt(position[0]);
                var posY = Integer.parseInt(position[2]);
                var posZ = Integer.parseInt(position[4]);

                while (posX != targetPosition[0] && posY != targetPosition[1] && posZ != targetPosition[3]) {
                    if (posX != targetPosition[0])
                        posX += (posX - targetPosition[0]) * .1;
                    if (posy != targetPosition[1])
                        posY += (posY - targetPosition[1]) * .1;
                    if (posZ != targetPosition[3])
                        posZ += (posZ - targetPosition[3]) * .1;
                    getElementById("id" + i).setAttribute("position", posX + " " + posY + " " + posZ);
                }
            }
        }

        function calcTargetPosition(overallPosition) {
            //Based on index see where you need to be. 
            var targetPosition = [];







            return targetPosition;
        }


        axios.get('/api/data/').then(function (symbol) {
            //Build Function gets called or I can have it in here.
            console.log(symbol);
            // buildMolecule(symbol);
        }).catch(function (error) {
            comsole.log(error);
        });

    </script>
</body>

</html>